{
    "version": "7.1",
    "screens": [
      {
        "id": "CHECKOUT",
        "title": "Complete Your Order",
        "terminal": false,
        "data": {
          "cart_summary": {
            "type": "string",
            "__example__": "Cart Summary:\n- Product 1 x 2 = ‚Çπ500\n- Product 2 x 1 = ‚Çπ300"
          },
          "total_amount": {
            "type": "string",
            "__example__": "800"
          },
          "currency": {
            "type": "string",
            "__example__": "INR"
          }
        },
        "layout": {
          "type": "SingleColumnLayout",
          "children": [
            {
              "type": "Form",
              "name": "checkout_form",
              "children": [
                {
                  "type": "TextHeading",
                  "text": "üõí Order Summary"
                },
                {
                  "type": "TextBody",
                  "text": "${data.cart_summary}"
                },
                {
                  "type": "TextSubheading",
                  "text": "üí∞ Total Amount: ‚Çπ${data.total_amount}"
                },
                {
                  "type": "TextSubheading",
                  "text": "üìã Your Information"
                },
                {
                  "type": "TextInput",
                  "name": "name",
                  "label": "Full Name",
                  "required": true,
                  "input-type": "text"
                },
                {
                  "type": "TextInput",
                  "name": "email",
                  "label": "Email Address",
                  "required": true,
                  "input-type": "email"
                },
                {
                  "type": "TextInput",
                  "name": "mobile",
                  "label": "Mobile Number",
                  "required": true,
                  "input-type": "phone"
                },
                {
                  "type": "TextSubheading",
                  "text": "üì¶ Shipping Address"
                },
                {
                  "type": "TextInput",
                  "name": "address",
                  "label": "Address Line",
                  "required": true,
                  "input-type": "text",
                  "helper-text": "e.g., No 1, Anna Street, Ganapathy Taluk"
                },
                {
                  "type": "TextInput",
                  "name": "pincode",
                  "label": "Pincode",
                  "required": true,
                  "input-type": "number",
                  "helper-text": "Enter 6-digit pincode - city and state will be auto-filled"
                },
                {
                  "type": "TextBody",
                  "text": "üí° City and State will be auto-filled after pincode validation"
                },
                {
                  "type": "Footer",
                  "label": "Continue",
                  "on-click-action": {
                    "name": "data_exchange",
                    "payload": {
                      "name": "${form.name}",
                      "email": "${form.email}",
                      "mobile": "${form.mobile}",
                      "address": "${form.address}",
                      "pincode": "${form.pincode}",
                      "cart_summary": "${data.cart_summary}",
                      "total_amount": "${data.total_amount}"
                    }
                  }
                }
              ]
            }
          ]
        },
        "action": {
          "name": "data_exchange",
          "data_exchange": {
            "method": "GET",
            "url": "https://wpbot.nanic.in/api/pincode/${form.pincode}"
          },
          "next": {
            "type": "screen",
            "name": "PINCODE_VALIDATION"
          }
        }
      },
      {
        "id": "PINCODE_VALIDATION",
        "title": "Validating Address",
        "terminal": false,
        "data": {
          "name": {
            "type": "string",
            "__example__": "John Doe"
          },
          "email": {
            "type": "string",
            "__example__": "john.doe@email.com"
          },
          "mobile": {
            "type": "string",
            "__example__": "+91 9876543210"
          },
          "address": {
            "type": "string",
            "__example__": "No 1, Anna Street, Ganapathy Taluk"
          },
          "pincode": {
            "type": "string",
            "__example__": "641006"
          },
          "city": {
            "type": "string",
            "__example__": "Coimbatore"
          },
          "state": {
            "type": "string",
            "__example__": "Tamil Nadu"
          },
          "cart_summary": {
            "type": "string",
            "__example__": "Cart Summary:\n- Product 1 x 2 = ‚Çπ500\n- Product 2 x 1 = ‚Çπ300"
          },
          "total_amount": {
            "type": "string",
            "__example__": "800"
          }
        },
        "layout": {
          "type": "SingleColumnLayout",
          "children": [
            {
              "type": "Form",
              "name": "validation_form",
              "children": [
                {
                  "type": "TextHeading",
                  "text": "üìç Address Validation"
                },
                {
                  "type": "TextBody",
                  "text": "We've fetched the following details based on your pincode. Please verify if they are correct."
                },
                {
                  "type": "TextSubheading",
                  "text": "üìã Customer Details"
                },
                {
                  "type": "TextBody",
                  "text": "Name: ${data.name}\nEmail: ${data.email}\nMobile: ${data.mobile}\nAddress: ${data.address}"
                },
                {
                  "type": "TextSubheading",
                  "text": "üîç Auto-filled Location Details"
                },
                {
                  "type": "TextBody",
                  "text": "Pincode: ${data.pincode}\nCity: ${data.city}\nState: ${data.state}"
                },
                {
                  "type": "TextSubheading",
                  "text": "‚úÖ Are these details correct?"
                },
                {
                  "type": "RadioButtonsGroup",
                  "name": "details_correct",
                  "label": "Verification",
                  "required": true,
                  "data-source": [
                    {
                      "id": "yes",
                      "title": "‚úÖ Yes, details are correct",
                      "description": "Proceed with these details"
                    },
                    {
                      "id": "no",
                      "title": "‚ùå No, I need to edit",
                      "description": "Let me correct the city/state"
                    }
                  ]
                },
                {
                  "type": "TextSubheading",
                  "text": "üìù Edit Details (if needed)"
                },
                {
                  "type": "TextInput",
                  "name": "city_edit",
                  "label": "City",
                  "required": false,
                  "input-type": "text",
                  "helper-text": "Only fill if you need to correct the city"
                },
                {
                  "type": "Dropdown",
                  "name": "state_edit",
                  "label": "State",
                  "required": false,
                  "data-source": [
                    { "id": "keep_current", "title": "Keep current state" },
                    { "id": "Tamil Nadu", "title": "Tamil Nadu" },
                    { "id": "Karnataka", "title": "Karnataka" },
                    { "id": "Andhra Pradesh", "title": "Andhra Pradesh" },
                    { "id": "Telangana", "title": "Telangana" },
                    { "id": "Kerala", "title": "Kerala" },
                    { "id": "Puducherry", "title": "Puducherry" },
                    { "id": "Maharashtra", "title": "Maharashtra" },
                    { "id": "Gujarat", "title": "Gujarat" },
                    { "id": "Rajasthan", "title": "Rajasthan" },
                    { "id": "Madhya Pradesh", "title": "Madhya Pradesh" },
                    { "id": "Uttar Pradesh", "title": "Uttar Pradesh" },
                    { "id": "Bihar", "title": "Bihar" },
                    { "id": "West Bengal", "title": "West Bengal" },
                    { "id": "Odisha", "title": "Odisha" },
                    { "id": "Jharkhand", "title": "Jharkhand" },
                    { "id": "Chhattisgarh", "title": "Chhattisgarh" },
                    { "id": "Haryana", "title": "Haryana" },
                    { "id": "Punjab", "title": "Punjab" },
                    { "id": "Himachal Pradesh", "title": "Himachal Pradesh" },
                    { "id": "Uttarakhand", "title": "Uttarakhand" },
                    { "id": "Delhi", "title": "Delhi" },
                    { "id": "Assam", "title": "Assam" },
                    { "id": "Arunachal Pradesh", "title": "Arunachal Pradesh" },
                    { "id": "Manipur", "title": "Manipur" },
                    { "id": "Meghalaya", "title": "Meghalaya" },
                    { "id": "Mizoram", "title": "Mizoram" },
                    { "id": "Nagaland", "title": "Nagaland" },
                    { "id": "Sikkim", "title": "Sikkim" },
                    { "id": "Tripura", "title": "Tripura" },
                    { "id": "Goa", "title": "Goa" },
                    { "id": "Andaman and Nicobar Islands", "title": "Andaman and Nicobar Islands" },
                    { "id": "Chandigarh", "title": "Chandigarh" },
                    { "id": "Dadra and Nagar Haveli", "title": "Dadra and Nagar Haveli" },
                    { "id": "Daman and Diu", "title": "Daman and Diu" },
                    { "id": "Jammu and Kashmir", "title": "Jammu and Kashmir" },
                    { "id": "Ladakh", "title": "Ladakh" },
                    { "id": "Lakshadweep", "title": "Lakshadweep" }
                  ]
                },
                {
                  "type": "Footer",
                  "label": "Confirm & Continue",
                  "on-click-action": {
                    "name": "navigate",
                    "next": {
                      "type": "screen",
                      "name": "DELIVERY_OPTIONS"
                    },
                    "payload": {
                      "name": "${data.name}",
                      "email": "${data.email}",
                      "mobile": "${data.mobile}",
                      "address": "${data.address}",
                      "city": "${form.city_edit ? form.city_edit : data.city}",
                      "state": "${form.state_edit == 'keep_current' ? data.state : (form.state_edit ? form.state_edit : data.state)}",
                      "pincode": "${data.pincode}",
                      "cart_summary": "${data.cart_summary}",
                      "total_amount": "${data.total_amount}",
                      "validated": "true"
                    }
                  }
                }
              ]
            }
          ]
        }
      },
      {
        "id": "DELIVERY_OPTIONS",
        "title": "Delivery Options",
        "terminal": false,
        "data": {
          "name": {
            "type": "string",
            "__example__": "John Doe"
          },
          "email": {
            "type": "string",
            "__example__": "john.doe@email.com"
          },
          "mobile": {
            "type": "string",
            "__example__": "+91 9876543210"
          },
          "address": {
            "type": "string",
            "__example__": "No 1, Anna Street, Ganapathy Taluk"
          },
          "city": {
            "type": "string",
            "__example__": "Coimbatore"
          },
          "state": {
            "type": "string",
            "__example__": "Tamil Nadu"
          },
          "pincode": {
            "type": "string",
            "__example__": "641006"
          },
          "cart_summary": {
            "type": "string",
            "__example__": "Cart Summary:\n- Product 1 x 2 = ‚Çπ500\n- Product 2 x 1 = ‚Çπ300"
          },
          "total_amount": {
            "type": "string",
            "__example__": "800"
          },
          "validated": {
            "type": "string",
            "__example__": "true"
          }
        },
        "layout": {
          "type": "SingleColumnLayout",
          "children": [
            {
              "type": "Form",
              "name": "delivery_form",
              "children": [
                {
                  "type": "TextHeading",
                  "text": "üöö Choose Delivery Method"
                },
                {
                  "type": "TextSubheading",
                  "text": "üìç Delivery Address"
                },
                {
                  "type": "TextBody",
                  "text": "${data.name}\n${data.address}\n${data.city}, ${data.state} - ${data.pincode}\nMobile: ${data.mobile}"
                },
                {
                  "type": "RadioButtonsGroup",
                  "name": "delivery_type",
                  "label": "Delivery Options",
                  "required": true,
                  "data-source": [
                    {
                      "id": "ship",
                      "title": "üöö Ship to Address",
                      "description": "We'll deliver to your provided address"
                    },
                    {
                      "id": "pickup",
                      "title": "üè™ Pickup from Store",
                      "description": "Collect from our store (No delivery charges)"
                    }
                  ]
                },
                {
                  "type": "TextSubheading",
                  "text": "üìç Store Address for Pickup"
                },
                {
                  "type": "TextBody",
                  "text": "No: 18, Mani Nagar, Sivanandapuram, Saravanampatti"
                },
                {
                  "type": "Footer",
                  "label": "Continue",
                  "on-click-action": {
                    "name": "navigate",
                    "next": {
                      "type": "screen",
                      "name": "DISCOUNT_CODE"
                    },
                    "payload": {
                      "name": "${data.name}",
                      "email": "${data.email}",
                      "mobile": "${data.mobile}",
                      "address": "${data.address}",
                      "city": "${data.city}",
                      "state": "${data.state}",
                      "pincode": "${data.pincode}",
                      "cart_summary": "${data.cart_summary}",
                      "total_amount": "${data.total_amount}",
                      "delivery_type": "${form.delivery_type}"
                    }
                  }
                }
              ]
            }
          ]
        }
      },
      {
        "id": "DISCOUNT_CODE",
        "title": "Discount Code",
        "terminal": false,
        "data": {
          "name": {
            "type": "string",
            "__example__": "John Doe"
          },
          "email": {
            "type": "string",
            "__example__": "john.doe@email.com"
          },
          "mobile": {
            "type": "string",
            "__example__": "+91 9876543210"
          },
          "address": {
            "type": "string",
            "__example__": "No 1, Anna Street, Ganapathy Taluk"
          },
          "city": {
            "type": "string",
            "__example__": "Coimbatore"
          },
          "state": {
            "type": "string",
            "__example__": "Tamil Nadu"
          },
          "pincode": {
            "type": "string",
            "__example__": "641006"
          },
          "cart_summary": {
            "type": "string",
            "__example__": "Cart Summary:\n- Product 1 x 2 = ‚Çπ500\n- Product 2 x 1 = ‚Çπ300"
          },
          "total_amount": {
            "type": "string",
            "__example__": "800"
          },
          "delivery_type": {
            "type": "string",
            "__example__": "ship"
          }
        },
        "layout": {
          "type": "SingleColumnLayout",
          "children": [
            {
              "type": "Form",
              "name": "discount_form",
              "children": [
                {
                  "type": "TextHeading",
                  "text": "üéüÔ∏è Discount Code"
                },
                {
                  "type": "TextBody",
                  "text": "Have a discount code? Enter it below to apply savings to your order."
                },
                {
                  "type": "TextInput",
                  "name": "discount_code",
                  "label": "Discount Code (Optional)",
                  "required": false,
                  "input-type": "text",
                  "helper-text": "Leave blank if you don't have a discount code"
                },
                {
                  "type": "Footer",
                  "label": "Apply & Continue",
                  "on-click-action": {
                    "name": "navigate",
                    "next": {
                      "type": "screen",
                      "name": "REVIEW_DETAILS"
                    },
                    "payload": {
                      "name": "${data.name}",
                      "email": "${data.email}",
                      "mobile": "${data.mobile}",
                      "address": "${data.address}",
                      "city": "${data.city}",
                      "state": "${data.state}",
                      "pincode": "${data.pincode}",
                      "cart_summary": "${data.cart_summary}",
                      "total_amount": "${data.total_amount}",
                      "delivery_type": "${data.delivery_type}",
                      "discount_code": "${form.discount_code}",
                      "order_id": "ORD-${data.mobile}"
                    }
                  }
                }
              ]
            }
          ]
        }
      },
      {
        "id": "REVIEW_DETAILS",
        "title": "Review Your Order",
        "terminal": false,
        "data": {
          "name": {
            "type": "string",
            "__example__": "John Doe"
          },
          "email": {
            "type": "string",
            "__example__": "john.doe@email.com"
          },
          "mobile": {
            "type": "string",
            "__example__": "+91 9876543210"
          },
          "address": {
            "type": "string",
            "__example__": "No 1, Anna Street, Ganapathy Taluk"
          },
          "city": {
            "type": "string",
            "__example__": "Coimbatore"
          },
          "state": {
            "type": "string",
            "__example__": "Tamil Nadu"
          },
          "pincode": {
            "type": "string",
            "__example__": "641006"
          },
          "cart_summary": {
            "type": "string",
            "__example__": "Cart Summary:\n- Product 1 x 2 = ‚Çπ500\n- Product 2 x 1 = ‚Çπ300"
          },
          "total_amount": {
            "type": "string",
            "__example__": "800"
          },
          "delivery_type": {
            "type": "string",
            "__example__": "ship"
          },
          "discount_code": {
            "type": "string",
            "__example__": "SAVE10"
          },
          "order_id": {
            "type": "string",
            "__example__": "ORD-123456"
          }
        },
        "layout": {
          "type": "SingleColumnLayout",
          "children": [
            {
              "type": "Form",
              "name": "review_form",
              "children": [
                {
                  "type": "TextHeading",
                  "text": "üìã Review Your Order"
                },
                {
                  "type": "TextBody",
                  "text": "Please review all the details below before submitting your order."
                },
                {
                  "type": "TextSubheading",
                  "text": "üõí Cart Summary"
                },
                {
                  "type": "TextBody",
                  "text": "${data.cart_summary}"
                },
                {
                  "type": "TextSubheading",
                  "text": "üë§ Customer Information"
                },
                {
                  "type": "TextBody",
                  "text": "Name: ${data.name}\nEmail: ${data.email}\nMobile: ${data.mobile}"
                },
                {
                  "type": "TextSubheading",
                  "text": "üì¶ Delivery Information"
                },
                {
                  "type": "TextBody",
                  "text": "Address: ${data.address}, ${data.city}, ${data.state} - ${data.pincode}"
                },
                {
                  "type": "TextBody",
                  "text": "Delivery Method: ${data.delivery_type == 'ship' ? 'üöö Ship to Address' : 'üè™ Pickup from Store'}"
                },
                {
                  "type": "TextSubheading",
                  "text": "üí∞ Order Summary"
                },
                {
                  "type": "TextBody",
                  "text": "Order ID: ${data.order_id}"
                },
                {
                  "type": "TextBody",
                  "text": "Total Amount: ‚Çπ${data.total_amount}"
                },
                {
                  "type": "TextBody",
                  "text": "Discount Code: ${data.discount_code ? data.discount_code : 'None applied'}"
                },
                {
                  "type": "Footer",
                  "label": "Submit Order",
                  "on-click-action": {
                    "name": "navigate",
                    "next": {
                      "type": "screen",
                      "name": "ORDER_CONFIRMATION"
                    },
                    "payload": {
                      "name": "${data.name}",
                      "email": "${data.email}",
                      "mobile": "${data.mobile}",
                      "address": "${data.address}",
                      "city": "${data.city}",
                      "state": "${data.state}",
                      "pincode": "${data.pincode}",
                      "cart_summary": "${data.cart_summary}",
                      "total_amount": "${data.total_amount}",
                      "delivery_type": "${data.delivery_type}",
                      "discount_code": "${data.discount_code}",
                      "order_id": "${data.order_id}"
                    }
                  }
                }
              ]
            }
          ]
        }
      },
      {
        "id": "ORDER_CONFIRMATION",
        "title": "Order Confirmed",
        "terminal": true,
        "success": true,
        "data": {
          "name": {
            "type": "string",
            "__example__": "John Doe"
          },
          "email": {
            "type": "string",
            "__example__": "john.doe@email.com"
          },
          "mobile": {
            "type": "string",
            "__example__": "+91 9876543210"
          },
          "address": {
            "type": "string",
            "__example__": "No 1, Anna Street, Ganapathy Taluk"
          },
          "city": {
            "type": "string",
            "__example__": "Coimbatore"
          },
          "state": {
            "type": "string",
            "__example__": "Tamil Nadu"
          },
          "pincode": {
            "type": "string",
            "__example__": "641006"
          },
          "cart_summary": {
            "type": "string",
            "__example__": "Cart Summary:\n- Product 1 x 2 = ‚Çπ500\n- Product 2 x 1 = ‚Çπ300"
          },
          "total_amount": {
            "type": "string",
            "__example__": "800"
          },
          "delivery_type": {
            "type": "string",
            "__example__": "ship"
          },
          "discount_code": {
            "type": "string",
            "__example__": "SAVE10"
          },
          "order_id": {
            "type": "string",
            "__example__": "ORD-123456"
          }
        },
        "layout": {
          "type": "SingleColumnLayout",
          "children": [
            {
              "type": "Form",
              "name": "confirmation_form",
              "children": [
                {
                  "type": "TextHeading",
                  "text": "üéâ Order Placed Successfully!"
                },
                {
                  "type": "TextBody",
                  "text": "Thank you ${data.name}! Your order has been successfully placed. Please proceed to payment to complete your purchase."
                },
                {
                  "type": "TextSubheading",
                  "text": "üìã Order Details"
                },
                {
                  "type": "TextBody",
                  "text": "Order ID: ${data.order_id}\nTotal Amount: ‚Çπ${data.total_amount}"
                },
                {
                  "type": "TextSubheading",
                  "text": "üì¶ Delivery Details"
                },
                {
                  "type": "TextBody",
                  "text": "Address: ${data.address}, ${data.city}, ${data.state} - ${data.pincode}"
                },
                {
                  "type": "TextBody",
                  "text": "Delivery Method: ${data.delivery_type == 'ship' ? 'üöö Ship to Address' : 'üè™ Pickup from Store'}"
                },
                {
                  "type": "TextBody",
                  "text": "You will receive a confirmation email shortly with your order details and payment instructions."
                },
                {
                  "type": "Footer",
                  "label": "Close",
                  "on-click-action": {
                    "name": "complete"
                  }
                }
              ]
            }
          ]
        }
      }
    ]
  }